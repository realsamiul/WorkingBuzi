<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>M0NARQ · Space Sustainability</title>

<!-- ──  LOCAL FONTS  ───────────────────────────────────────── -->
<link rel="preload" href="EditorialNew-Light.woff2"      as="font" type="font/woff2" crossorigin>
<link rel="preload" href="SweetSansPro-Medium.woff2"     as="font" type="font/woff2" crossorigin>
<link rel="preload" href="NeueMontreal-Regular.woff2"    as="font" type="font/woff2" crossorigin>

<style>
/* Editorial New – light for hero H1 */
@font-face{font-family:'Editorial New';src:url('EditorialNew-Light.woff2')format('woff2');
  font-style:normal;font-weight:300;font-display:swap}
/* Sweet Sans Pro – body copy */
@font-face{font-family:'Sweet Sans';src:url('SweetSansPro-Medium.woff2')format('woff2');
  font-style:normal;font-weight:500;font-display:swap}
/* Neue Montreal – subheads / UI */
@font-face{font-family:'Neue Montreal';src:url('NeueMontreal-Regular.woff2')format('woff2');
  font-style:normal;font-weight:400;font-display:swap}

:root{
  --brand-red:#c40d2e;
  --teal:#33ffd5;
  --midnight:#050d24;
  --black:#000;
  --text-grey:#b5b5b5;
  --display:'Editorial New',serif;   /* big headlines */
  --subhead:'Neue Montreal',sans-serif;
  --body:'Sweet Sans',sans-serif;
}

/* ──  GLOBAL  ─────────────────────────────────────────────── */
html,body{height:100%;width:100%;margin:0;overflow-x:hidden;
  font-family:var(--body);
  background:radial-gradient(circle at 50% 20%,var(--midnight) 0%,var(--black) 80%);
  color:#fff;-webkit-font-smoothing:antialiased}

/* ──  PRE-LOADER  ─────────────────────────────────────────── */
#preloader{position:fixed;inset:0;background:#000;display:flex;justify-content:center;align-items:center;flex-direction:column;
  z-index:200;pointer-events:none}
#preloader canvas{width:100%;height:100%;position:absolute;top:0;left:0}
#titleScramble{font-family:'Neue Montreal',sans-serif;font-size:2.2rem;letter-spacing:.25em;z-index:10}
#preloader::after{content:'';width:160px;height:160px;border-radius:50%;
  background:radial-gradient(circle,#fff2 0%,transparent 70%);
  position:absolute;mix-blend-mode:overlay;animation:glint 3s infinite}
@keyframes glint{0%{transform:scale(.3)}50%{transform:scale(1)}100%{transform:scale(.3)}}

/* ──  UI CHROME  ──────────────────────────────────────────── */
.ui-layer{position:fixed;inset:0;padding:40px;display:flex;flex-direction:column;justify-content:space-between;pointer-events:none;z-index:10}
.logo{font-family:var(--subhead);letter-spacing:.25em;font-size:1.35rem;text-transform:uppercase}
.progress-bar-container{position:fixed;right:50px;top:50%;transform:translateY(-50%);
  width:1px;height:20vh;background:rgba(255,255,255,.18);z-index:20}
.progress-bar-fill{width:100%;height:0;background:var(--brand-red)}

/* ──  SCROLL SECTIONS  ───────────────────────────────────── */
.scroll-content{position:relative;z-index:5}
section{min-height:100vh;display:flex;flex-direction:column;justify-content:center;
  padding:0 15%;box-sizing:border-box;pointer-events:none}
.text-block{max-width:560px;pointer-events:auto;opacity:0;transform:translateY(40px)}

h1{font-family:var(--display);font-weight:300;letter-spacing:.02em;text-transform:uppercase;
  font-size:clamp(3.3rem,6vw,7rem);line-height:1;margin:0 0 2rem}
h2{font-family:var(--subhead);font-weight:400;text-transform:uppercase;letter-spacing:.1em;
  font-size:2rem;margin:0 0 1rem;color:var(--brand-red)}
p{font-family:var(--body);font-weight:500;font-size:1.05rem;line-height:1.8;color:var(--text-grey);margin:0 0 1.4rem}
.big-stat{font-family:var(--subhead);font-size:8rem;line-height:1;margin:0}

#section-intro{align-items:flex-start}
#section-stats{align-items:flex-end;text-align:right}
#section-privateer{align-items:center;text-align:center}
#section-wayfinder{align-items:flex-start}

/* 3-D canvas */
#canvas-container{position:fixed;inset:0;pointer-events:none;z-index:1;opacity:0;transition:opacity 1.5s ease}
</style>
</head>
<body>

<!-- ── PRE-LOADER ── -->
<div id="preloader">
  <div id="titleScramble">M0NARQ</div>
</div>

<!-- ── UI ── -->
<div class="ui-layer"><div class="logo">M0NARQ</div></div>
<div class="progress-bar-container"><div id="scroll-progress" class="progress-bar-fill"></div></div>

<!-- ── 3-D Earth canvas ── -->
<div id="canvas-container"></div>

<!-- ── CONTENT ── -->
<div class="scroll-content">
  <section id="section-intro">
    <div class="text-block">
      <h1>Planet<br>M0NARQ</h1>
      <p>From silent beeps to high-bandwidth constellations, orbit has evolved. M0NARQ turns that evolution into geospatial insight.</p>
    </div>
  </section>

  <section id="section-stats">
    <div class="text-block">
      <span class="big-stat" id="stat-counter">0</span>
      <h2>Orbital Objects</h2>
      <p>Human-made objects larger than a softball are currently being tracked as they circle Earth.</p>
      <p>24 000 more satellites are scheduled to launch within the next decade.</p>
    </div>
  </section>

  <section id="section-privateer">
    <div class="text-block" style="max-width:800px">
      <h2>M0NARQ × PRIVATEER</h2>
      <p>Together we monitor, assess and verify on-orbit behaviour for a safer, more sustainable space.</p>
    </div>
  </section>

  <section id="section-wayfinder">
    <div class="text-block">
      <h1>Wayfinder</h1>
      <p>An open-access, near-real-time visualisation of satellites and debris—empowering responsible actors across the globe.</p>
    </div>
  </section>
  <div style="height:50vh"></div>
</div>

<!-- ── LIBS (flat paths) ── -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/loaders/GLTFLoader.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="ScrambleTextPlugin.min.js"></script>

<script>
/* ============================================================
   1.  PRE-LOADER  (Sentinel GLB + GSAP ScrambleText)
============================================================ */
const preCanvas=document.createElement('canvas');
preCanvas.style.cssText='width:100%;height:100%;position:absolute;top:0;left:0';
document.getElementById('preloader').appendChild(preCanvas);

const pRend=new THREE.WebGLRenderer({canvas:preCanvas,alpha:true,antialias:true});
pRend.setPixelRatio(Math.min(devicePixelRatio,2));pRend.setSize(innerWidth,innerHeight);
const pScene=new THREE.Scene();
const pCam=new THREE.PerspectiveCamera(50,innerWidth/innerHeight,.1,100);pCam.position.set(0,0,4);
new THREE.TextureLoader().load('milkyway_8k.jpg',t=>{t.mapping=THREE.EquirectangularReflectionMapping;pScene.environment=t;});

new THREE.GLTFLoader().load('sentinel.glb',glb=>{
  const sat=glb.scene;sat.scale.set(2,2,2);pScene.add(sat);
  pScene.add(new THREE.DirectionalLight(0xffffff,1).position.set(2,2,5));
  pScene.add(new THREE.AmbientLight(0xffffff,.4));
  gsap.to(pCam.position,{z:2,x:1.2,y:.4,duration:4,ease:'power1.inOut',delay:.5});
  gsap.to(sat.rotation,{y:Math.PI*2,duration:6,ease:'none'});
});

function animatePre(){pRend.render(pScene,pCam);requestAnimationFrame(animatePre);}
animatePre();

gsap.registerPlugin(ScrambleTextPlugin);
gsap.fromTo('#titleScramble',{scrambleText:{text:'',chars:'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',speed:0.35}},
  {duration:2,scrambleText:{text:'M0NARQ',revealDelay:0},onComplete:finishPreloader});

function finishPreloader(){
  gsap.to('#preloader',{opacity:0,duration:.8,ease:'power2.inOut',onComplete:()=>{preloader.remove();initMainScene();}});
}

/* ============================================================
   2.  MAIN SCENE
============================================================ */
function initMainScene(){
  const cont=document.getElementById('canvas-container');
  const renderer=new THREE.WebGLRenderer({alpha:true,antialias:true});
  renderer.setSize(innerWidth,innerHeight);
  renderer.setPixelRatio(Math.min(devicePixelRatio,1.75));
  renderer.toneMapping=THREE.ACESFilmicToneMapping;
  cont.appendChild(renderer.domElement);

  const scene=new THREE.Scene();
  const cam=new THREE.PerspectiveCamera(45,innerWidth/innerHeight,.1,1000);
  cam.position.set(0,0,18);

  /* ── Texture loading ── */
  const tex={},mgr=new THREE.LoadingManager(()=>{cont.style.opacity=1;startScrollAnim();render();});
  const tl=new THREE.TextureLoader(mgr);
  tex.alb=tl.load('albedo_8k.jpg');
  tex.nit=tl.load('night_8k.jpg');
  tex.cld=tl.load('clouds_4k.webp');
  tex.sta=tl.load('milkyway_8k.jpg',t=>{t.mapping=THREE.EquirectangularReflectionMapping;});
  tex.nrm=tl.load('normal_4k.basis');
  tex.spe=tl.load('spec_4k.basis');
  tex.rou=tl.load('rough_4k.basis');

  /* ── Earth group ── */
  const g=new THREE.Group();scene.add(g);
  const earthMat=new THREE.MeshStandardMaterial({
    map:tex.alb,normalMap:tex.nrm,metalnessMap:tex.spe,roughnessMap:tex.rou,
    emissiveMap:tex.nit,emissive:new THREE.Color('#222')});
  g.add(new THREE.Mesh(new THREE.SphereGeometry(5,128,128),earthMat));
  g.add(new THREE.Mesh(new THREE.SphereGeometry(5.05,64,64),
    new THREE.MeshLambertMaterial({map:tex.cld,transparent:true,opacity:.4,side:THREE.DoubleSide})));
  g.add(new THREE.Mesh(new THREE.SphereGeometry(5.2,64,64),new THREE.ShaderMaterial({
    vertexShader:`varying vec3 v;void main(){v=normalize(normalMatrix*normal);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`,
    fragmentShader:`varying vec3 v;void main(){float i=pow(.55-dot(v,vec3(0,0,1.)),4.);gl_FragColor=vec4(.3,.6,1.,1.)*i*1.7;}`,
    side:THREE.BackSide,blending:THREE.AdditiveBlending,transparent:true}));

  /* ── Stars ── */
  function star(r,o){const m=new THREE.Mesh(new THREE.SphereGeometry(r,64,64),
    new THREE.MeshBasicMaterial({map:tex.sta,side:THREE.BackSide,transparent:true,opacity:o}));scene.add(m);return m;}
  const sNear=star(90,.28),sFar=star(120,.55);

  /* ── Debris ── */
  const dCnt=devicePixelRatio<1.5?12000:27000,pos=[];
  for(let i=0;i<dCnt;i++){const r=5.5+Math.random()*2.4,t=Math.random()*2*Math.PI,p=Math.acos(2*Math.random()-1);
    pos.push(r*Math.sin(p)*Math.cos(t),r*Math.sin(p)*Math.sin(t),r*Math.cos(p));}
  const dGeo=new THREE.BufferGeometry().setAttribute('position',new THREE.Float32BufferAttribute(pos,3));
  const dMat=new THREE.PointsMaterial({color:'#ffffff',size:.03,transparent:true,opacity:0});
  scene.add(new THREE.Points(dGeo,dMat));

  /* ── Arcs ── */
  const arcGrp=new THREE.Group();scene.add(arcGrp);
  const ARC_MAX=devicePixelRatio<1.5?25:48;
  setInterval(()=>{if(arcGrp.children.length<ARC_MAX)addArc();},400);
  function addArc(){
    const r=6+Math.random()*1.5;
    const curve=new THREE.CatmullRomCurve3([...Array(30)].map(()=>new THREE.Vector3().setFromSphericalCoords(
      r,Math.random()*Math.PI,Math.random()*2*Math.PI)));
    const geo=new THREE.TubeGeometry(curve,.08,.02,8,false);
    const mat=new THREE.MeshBasicMaterial({color:varColor('--teal'),transparent:true,opacity:0});
    const mesh=new THREE.Mesh(geo,mat);arcGrp.add(mesh);
    gsap.fromTo(mat,{opacity:0},{opacity:.9,duration:.6,ease:'power2.out',yoyo:true,repeat:1,repeatDelay:.8,
      onComplete:()=>{arcGrp.remove(mesh);geo.dispose();mat.dispose();}});
  }

  /* ── Lights ── */
  scene.environment=tex.sta;
  scene.add(new THREE.DirectionalLight(0xffffff,1).position.set(20,10,10));
  scene.add(new THREE.AmbientLight(0xffffff,.15));

  /* ── Resize ── */
  addEventListener('resize',()=>{cam.aspect=innerWidth/innerHeight;cam.updateProjectionMatrix();
    renderer.setSize(innerWidth,innerHeight);});

  /* ── Render loop ── */
  const clk=new THREE.Clock();
  function render(){const d=clk.getDelta()*60;
    g.rotation.y+=.015*d;arcGrp.rotation.y+=.0006*d;sNear.rotation.y-=.002;sFar.rotation.y-=.0012;
    renderer.render(scene,cam);requestAnimationFrame(render);}

  /* ── ScrollTriggers ── */
  function startScrollAnim(){
    gsap.registerPlugin(ScrollTrigger);
    document.querySelectorAll('.text-block').forEach(el=>{
      gsap.to(el,{opacity:1,y:0,duration:1.1,ease:'cubic-bezier(.6,0,.2,1)',
        scrollTrigger:{trigger:el,start:'top 80%',toggleActions:'play none none reverse'}});
    });

    const tl=gsap.timeline({scrollTrigger:{trigger:'body',start:'top top',end:'bottom bottom',scrub:1.2}});
    tl.to(cam.position,{z:12,y:2,ease:'power1.inOut'},0)
      .to(dMat,{opacity:.8,duration:1.5},.4)
      .to(cam.position,{x:-5,z:9,duration:4},.33)
      .to(cam.position,{x:0,y:10,z:0,duration:4},.66)
      .to(cam.rotation,{x:-Math.PI/2,y:0,z:0,duration:4},.66);

    ScrollTrigger.create({trigger:'#section-stats',start:'top center',
      onEnter:()=>{const o={v:0};gsap.to(o,{v:27000,duration:2,ease:'power2.out',
        onUpdate:()=>statCounter.textContent=Math.floor(o.v).toLocaleString()});}});

    gsap.to('#scroll-progress',{height:'100%',ease:'none',
      scrollTrigger:{trigger:'body',start:'top top',end:'bottom bottom',scrub:0}});
  }
}

function varColor(v){return new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue(v));}
</script>
</body>
</html>
